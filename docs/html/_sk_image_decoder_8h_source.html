<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Skia: /Volumes/disk/skia/trunk/include/images/SkImageDecoder.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>/Volumes/disk/skia/trunk/include/images/SkImageDecoder.h</h1><a href="_sk_image_decoder_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (C) 2006 The Android Open Source Project</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<a name="l00005"></a>00005 <span class="comment"> * you may not use this file except in compliance with the License.</span>
<a name="l00006"></a>00006 <span class="comment"> * You may obtain a copy of the License at</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> *      http://www.apache.org/licenses/LICENSE-2.0</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> * Unless required by applicable law or agreed to in writing, software</span>
<a name="l00011"></a>00011 <span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<a name="l00012"></a>00012 <span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00013"></a>00013 <span class="comment"> * See the License for the specific language governing permissions and</span>
<a name="l00014"></a>00014 <span class="comment"> * limitations under the License.</span>
<a name="l00015"></a>00015 <span class="comment"> */</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="preprocessor">#ifndef SkImageDecoder_DEFINED</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span><span class="preprocessor">#define SkImageDecoder_DEFINED</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;<a class="code" href="_sk_bitmap_8h.html">SkBitmap.h</a>&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;<a class="code" href="_sk_ref_cnt_8h.html">SkRefCnt.h</a>&quot;</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="keyword">class </span><a class="code" href="class_sk_stream.html">SkStream</a>;
<a name="l00024"></a>00024 
<a name="l00029"></a><a class="code" href="class_sk_image_decoder.html">00029</a> <span class="keyword">class </span><a class="code" href="class_sk_image_decoder.html">SkImageDecoder</a> {
<a name="l00030"></a>00030 <span class="keyword">public</span>:
<a name="l00031"></a>00031     <span class="keyword">virtual</span> <a class="code" href="class_sk_image_decoder.html#a8de040979436d1deb6d7817839437adc">~SkImageDecoder</a>();
<a name="l00032"></a>00032 
<a name="l00033"></a><a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4c">00033</a>     <span class="keyword">enum</span> <a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4c">Format</a> {
<a name="l00034"></a><a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4cabba979731ee6b67f12e1f669e04e3456">00034</a>         <a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4cabba979731ee6b67f12e1f669e04e3456">kUnknown_Format</a>,
<a name="l00035"></a><a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4cab58f0800b48a0843f45e0b783140926f">00035</a>         <a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4cab58f0800b48a0843f45e0b783140926f">kBMP_Format</a>,
<a name="l00036"></a><a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4cae12d598cf48cb1194c37704f2a08af38">00036</a>         <a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4cae12d598cf48cb1194c37704f2a08af38">kGIF_Format</a>,
<a name="l00037"></a><a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4ca158d194262bb0b1a26c5f07b346a12db">00037</a>         <a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4ca158d194262bb0b1a26c5f07b346a12db">kICO_Format</a>,
<a name="l00038"></a><a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4ca28606da9171b8704146a8bf0f9b8c65a">00038</a>         <a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4ca28606da9171b8704146a8bf0f9b8c65a">kJPEG_Format</a>,
<a name="l00039"></a><a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4ca7c56212e899db4ff064b2c1e088ed669">00039</a>         <a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4ca7c56212e899db4ff064b2c1e088ed669">kPNG_Format</a>,
<a name="l00040"></a><a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4ca4bbe1ad576d8fd54d0beb6e9d23e67d4">00040</a>         <a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4ca4bbe1ad576d8fd54d0beb6e9d23e67d4">kWBMP_Format</a>,
<a name="l00041"></a>00041 
<a name="l00042"></a><a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4ca7923b84b50d58c4d82622df483b4a374">00042</a>         <a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4ca7923b84b50d58c4d82622df483b4a374">kLastKnownFormat</a> = <a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4ca4bbe1ad576d8fd54d0beb6e9d23e67d4">kWBMP_Format</a>
<a name="l00043"></a>00043     };
<a name="l00044"></a>00044 
<a name="l00047"></a>00047     <span class="keyword">virtual</span> <a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4c">Format</a> <a class="code" href="class_sk_image_decoder.html#aa5b80deb18001a4648f380681f2da4c5">getFormat</a>() <span class="keyword">const</span>;
<a name="l00048"></a>00048 
<a name="l00052"></a><a class="code" href="class_sk_image_decoder.html#a862680cbdaecdd9a18f13ccf917221c5">00052</a>     <span class="keywordtype">bool</span> <a class="code" href="class_sk_image_decoder.html#a862680cbdaecdd9a18f13ccf917221c5">getDitherImage</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fDitherImage; }
<a name="l00053"></a>00053 
<a name="l00057"></a><a class="code" href="class_sk_image_decoder.html#a3b9f63dda74fc5eba3df4b56b546dc82">00057</a>     <span class="keywordtype">void</span> <a class="code" href="class_sk_image_decoder.html#a3b9f63dda74fc5eba3df4b56b546dc82">setDitherImage</a>(<span class="keywordtype">bool</span> dither) { fDitherImage = dither; }
<a name="l00058"></a>00058 
<a name="l00064"></a><a class="code" href="class_sk_image_decoder_1_1_peeker.html">00064</a>     <span class="keyword">class </span><a class="code" href="class_sk_image_decoder_1_1_peeker.html">Peeker</a> : <span class="keyword">public</span> <a class="code" href="class_sk_ref_cnt.html">SkRefCnt</a> {
<a name="l00065"></a>00065     <span class="keyword">public</span>:
<a name="l00069"></a>00069         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_sk_image_decoder_1_1_peeker.html#a94d5ba6cd34694cc0c5fb0bcdcb9d128">peek</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> tag[], <span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keywordtype">size_t</span> length) = 0;
<a name="l00070"></a>00070     };
<a name="l00071"></a>00071 
<a name="l00072"></a><a class="code" href="class_sk_image_decoder.html#a2bf01a8dcd6c67f26616cb536fe5ddb2">00072</a>     <a class="code" href="class_sk_image_decoder_1_1_peeker.html">Peeker</a>* <a class="code" href="class_sk_image_decoder.html#a2bf01a8dcd6c67f26616cb536fe5ddb2">getPeeker</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fPeeker; }
<a name="l00073"></a>00073     Peeker* <a class="code" href="class_sk_image_decoder.html#a00316d81f940e30573e4bb24b399202f">setPeeker</a>(Peeker*);
<a name="l00074"></a>00074 
<a name="l00080"></a><a class="code" href="class_sk_image_decoder_1_1_chooser.html">00080</a>     <span class="keyword">class </span><a class="code" href="class_sk_image_decoder_1_1_chooser.html">Chooser</a> : <span class="keyword">public</span> <a class="code" href="class_sk_ref_cnt.html">SkRefCnt</a> {
<a name="l00081"></a>00081     <span class="keyword">public</span>:
<a name="l00082"></a><a class="code" href="class_sk_image_decoder_1_1_chooser.html#ad426009abbbfde4049e20d5420ac2497">00082</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sk_image_decoder_1_1_chooser.html#ad426009abbbfde4049e20d5420ac2497">begin</a>(<span class="keywordtype">int</span> count) {}
<a name="l00083"></a><a class="code" href="class_sk_image_decoder_1_1_chooser.html#a680a232adc1626be15c4565e9dce0764">00083</a>         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sk_image_decoder_1_1_chooser.html#a680a232adc1626be15c4565e9dce0764">inspect</a>(<span class="keywordtype">int</span> index, <a class="code" href="class_sk_bitmap.html#a62602e28fc755def34d7e261bfd0b74a">SkBitmap::Config</a> config, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height) {}
<a name="l00086"></a>00086         <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="class_sk_image_decoder_1_1_chooser.html#a308b1ba146e202c60ba6e324a6361d34">choose</a>() = 0;
<a name="l00087"></a>00087     };
<a name="l00088"></a>00088 
<a name="l00089"></a><a class="code" href="class_sk_image_decoder.html#a6f0cd5bc36250db74eefb5f45143ff5f">00089</a>     <a class="code" href="class_sk_image_decoder_1_1_chooser.html">Chooser</a>* <a class="code" href="class_sk_image_decoder.html#a6f0cd5bc36250db74eefb5f45143ff5f">getChooser</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fChooser; }
<a name="l00090"></a>00090     Chooser* <a class="code" href="class_sk_image_decoder.html#a663ae4b6f77669d7cb761edc97900aa9">setChooser</a>(Chooser*);
<a name="l00091"></a>00091 
<a name="l00092"></a><a class="code" href="class_sk_image_decoder.html#aca4027756b064db23add2695bd148969">00092</a>     SkBitmap::Allocator* <a class="code" href="class_sk_image_decoder.html#aca4027756b064db23add2695bd148969">getAllocator</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fAllocator; }
<a name="l00093"></a>00093     SkBitmap::Allocator* <a class="code" href="class_sk_image_decoder.html#a413a1835de812fb0ed66bccb107c0206">setAllocator</a>(SkBitmap::Allocator*);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095     <span class="comment">// sample-size, if set to &gt; 1, tells the decoder to return a smaller than</span>
<a name="l00096"></a>00096     <span class="comment">// original bitmap, sampling 1 pixel for every size pixels. e.g. if sample</span>
<a name="l00097"></a>00097     <span class="comment">// size is set to 3, then the returned bitmap will be 1/3 as wide and high,</span>
<a name="l00098"></a>00098     <span class="comment">// and will contain 1/9 as many pixels as the original.</span>
<a name="l00099"></a>00099     <span class="comment">// Note: this is a hint, and the codec may choose to ignore this, or only</span>
<a name="l00100"></a>00100     <span class="comment">// approximate the sample size.</span>
<a name="l00101"></a><a class="code" href="class_sk_image_decoder.html#aa5a4cb415365129038ea57c3d35de58e">00101</a>     <span class="keywordtype">int</span> <a class="code" href="class_sk_image_decoder.html#aa5a4cb415365129038ea57c3d35de58e">getSampleSize</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fSampleSize; }
<a name="l00102"></a>00102     <span class="keywordtype">void</span> <a class="code" href="class_sk_image_decoder.html#a84edcb0bdc1f3772607d657b48af0c9b">setSampleSize</a>(<span class="keywordtype">int</span> size);
<a name="l00103"></a>00103 
<a name="l00106"></a><a class="code" href="class_sk_image_decoder.html#a8b240fae50b92c70e80d93506af1c421">00106</a>     <span class="keywordtype">void</span> <a class="code" href="class_sk_image_decoder.html#a8b240fae50b92c70e80d93506af1c421">resetSampleSize</a>() { this-&gt;<a class="code" href="class_sk_image_decoder.html#a84edcb0bdc1f3772607d657b48af0c9b">setSampleSize</a>(1); }
<a name="l00107"></a>00107 
<a name="l00119"></a><a class="code" href="class_sk_image_decoder.html#af28fe6b84efed28bc16ff4567c3031c1">00119</a>     <span class="keywordtype">void</span> <a class="code" href="class_sk_image_decoder.html#af28fe6b84efed28bc16ff4567c3031c1">cancelDecode</a>() {
<a name="l00120"></a>00120         <span class="comment">// now the subclass must query shouldCancelDecode() to be informed</span>
<a name="l00121"></a>00121         <span class="comment">// of the request</span>
<a name="l00122"></a>00122         fShouldCancelDecode = <span class="keyword">true</span>;
<a name="l00123"></a>00123     }
<a name="l00124"></a>00124 
<a name="l00129"></a><a class="code" href="class_sk_image_decoder.html#a01cd7635ff77a7378071b343034e796a">00129</a>     <span class="keyword">enum</span> <a class="code" href="class_sk_image_decoder.html#a01cd7635ff77a7378071b343034e796a">Mode</a> {
<a name="l00130"></a><a class="code" href="class_sk_image_decoder.html#a01cd7635ff77a7378071b343034e796aa5e4a5ce2bd909749897d9c39adc7f8de">00130</a>         <a class="code" href="class_sk_image_decoder.html#a01cd7635ff77a7378071b343034e796aa5e4a5ce2bd909749897d9c39adc7f8de" title="only return width/height/config in bitmap">kDecodeBounds_Mode</a>, 
<a name="l00131"></a><a class="code" href="class_sk_image_decoder.html#a01cd7635ff77a7378071b343034e796aac3408b0dd514fccb26443755d8ac61f7">00131</a>         <a class="code" href="class_sk_image_decoder.html#a01cd7635ff77a7378071b343034e796aac3408b0dd514fccb26443755d8ac61f7" title="return entire bitmap (including pixels)">kDecodePixels_Mode</a>  
<a name="l00132"></a>00132     };
<a name="l00133"></a>00133 
<a name="l00147"></a>00147     <span class="keywordtype">bool</span> <a class="code" href="class_sk_image_decoder.html#a662b29f18a836ace462d833a6109af36">decode</a>(<a class="code" href="class_sk_stream.html">SkStream</a>*, <a class="code" href="class_sk_bitmap.html">SkBitmap</a>* bitmap, <a class="code" href="class_sk_bitmap.html#a62602e28fc755def34d7e261bfd0b74a">SkBitmap::Config</a> pref, <a class="code" href="class_sk_image_decoder.html#a01cd7635ff77a7378071b343034e796a">Mode</a>);
<a name="l00148"></a>00148 
<a name="l00152"></a>00152     <span class="keyword">static</span> <a class="code" href="class_sk_image_decoder.html">SkImageDecoder</a>* <a class="code" href="class_sk_image_decoder.html#a07701770b747e70359029b3dbb8463da">Factory</a>(<a class="code" href="class_sk_stream.html">SkStream</a>*);
<a name="l00153"></a>00153 
<a name="l00167"></a>00167     <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_sk_image_decoder.html#a1247c9b3f567d2a11a577f05ebea5175">DecodeFile</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> file[], <a class="code" href="class_sk_bitmap.html">SkBitmap</a>* bitmap,
<a name="l00168"></a>00168                            <a class="code" href="class_sk_bitmap.html#a62602e28fc755def34d7e261bfd0b74a">SkBitmap::Config</a> prefConfig, <a class="code" href="class_sk_image_decoder.html#a01cd7635ff77a7378071b343034e796a">Mode</a>,
<a name="l00169"></a>00169                            <a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4c">Format</a>* format = NULL);
<a name="l00170"></a><a class="code" href="class_sk_image_decoder.html#ad501b8354d6b8a39864810b9aec8826c">00170</a>     <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_sk_image_decoder.html#ad501b8354d6b8a39864810b9aec8826c">DecodeFile</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> file[], <a class="code" href="class_sk_bitmap.html">SkBitmap</a>* bitmap) {
<a name="l00171"></a>00171         <span class="keywordflow">return</span> <a class="code" href="class_sk_image_decoder.html#a1247c9b3f567d2a11a577f05ebea5175">DecodeFile</a>(file, bitmap, <a class="code" href="class_sk_bitmap.html#a62602e28fc755def34d7e261bfd0b74aa14e7f816be308af0f5b949b81722eeb8" title="bitmap has not been configured">SkBitmap::kNo_Config</a>,
<a name="l00172"></a>00172                           <a class="code" href="class_sk_image_decoder.html#a01cd7635ff77a7378071b343034e796aac3408b0dd514fccb26443755d8ac61f7" title="return entire bitmap (including pixels)">kDecodePixels_Mode</a>, NULL);
<a name="l00173"></a>00173     }
<a name="l00187"></a>00187     <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_sk_image_decoder.html#a3ced0562e946b794af780774a70f5b18">DecodeMemory</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* buffer, <span class="keywordtype">size_t</span> size, <a class="code" href="class_sk_bitmap.html">SkBitmap</a>* bitmap,
<a name="l00188"></a>00188                              <a class="code" href="class_sk_bitmap.html#a62602e28fc755def34d7e261bfd0b74a">SkBitmap::Config</a> prefConfig, <a class="code" href="class_sk_image_decoder.html#a01cd7635ff77a7378071b343034e796a">Mode</a>,
<a name="l00189"></a>00189                              <a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4c">Format</a>* format = NULL);
<a name="l00190"></a><a class="code" href="class_sk_image_decoder.html#aad5767b3ca727f52ac877129e7ec91ac">00190</a>     <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_sk_image_decoder.html#aad5767b3ca727f52ac877129e7ec91ac">DecodeMemory</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* buffer, <span class="keywordtype">size_t</span> size, <a class="code" href="class_sk_bitmap.html">SkBitmap</a>* bitmap){
<a name="l00191"></a>00191         <span class="keywordflow">return</span> <a class="code" href="class_sk_image_decoder.html#a3ced0562e946b794af780774a70f5b18">DecodeMemory</a>(buffer, size, bitmap, <a class="code" href="class_sk_bitmap.html#a62602e28fc755def34d7e261bfd0b74aa14e7f816be308af0f5b949b81722eeb8" title="bitmap has not been configured">SkBitmap::kNo_Config</a>,
<a name="l00192"></a>00192                             <a class="code" href="class_sk_image_decoder.html#a01cd7635ff77a7378071b343034e796aac3408b0dd514fccb26443755d8ac61f7" title="return entire bitmap (including pixels)">kDecodePixels_Mode</a>, NULL);
<a name="l00193"></a>00193     }
<a name="l00207"></a>00207     <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_sk_image_decoder.html#ae4fe3757d90d7a95f677011508ec6041">DecodeStream</a>(<a class="code" href="class_sk_stream.html">SkStream</a>* stream, <a class="code" href="class_sk_bitmap.html">SkBitmap</a>* bitmap,
<a name="l00208"></a>00208                              <a class="code" href="class_sk_bitmap.html#a62602e28fc755def34d7e261bfd0b74a">SkBitmap::Config</a> prefConfig, <a class="code" href="class_sk_image_decoder.html#a01cd7635ff77a7378071b343034e796a">Mode</a>,
<a name="l00209"></a>00209                              <a class="code" href="class_sk_image_decoder.html#a1895865301601c976082db64b9e16c4c">Format</a>* format = NULL);
<a name="l00210"></a><a class="code" href="class_sk_image_decoder.html#a1a9e06d99bd383ae13bf87ed4c9c9073">00210</a>     <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_sk_image_decoder.html#a1a9e06d99bd383ae13bf87ed4c9c9073">DecodeStream</a>(<a class="code" href="class_sk_stream.html">SkStream</a>* stream, <a class="code" href="class_sk_bitmap.html">SkBitmap</a>* bitmap) {
<a name="l00211"></a>00211         <span class="keywordflow">return</span> <a class="code" href="class_sk_image_decoder.html#ae4fe3757d90d7a95f677011508ec6041">DecodeStream</a>(stream, bitmap, <a class="code" href="class_sk_bitmap.html#a62602e28fc755def34d7e261bfd0b74aa14e7f816be308af0f5b949b81722eeb8" title="bitmap has not been configured">SkBitmap::kNo_Config</a>,
<a name="l00212"></a>00212                             <a class="code" href="class_sk_image_decoder.html#a01cd7635ff77a7378071b343034e796aac3408b0dd514fccb26443755d8ac61f7" title="return entire bitmap (including pixels)">kDecodePixels_Mode</a>, NULL);
<a name="l00213"></a>00213     }
<a name="l00214"></a>00214 
<a name="l00220"></a>00220     <span class="keyword">static</span> <a class="code" href="class_sk_bitmap.html#a62602e28fc755def34d7e261bfd0b74a">SkBitmap::Config</a> <a class="code" href="class_sk_image_decoder.html#a9ccf570c9206522f23e3f20fa32533de">GetDeviceConfig</a>();
<a name="l00227"></a>00227     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_sk_image_decoder.html#af08219f61c89ddef01da828cb1c2242e">SetDeviceConfig</a>(<a class="code" href="class_sk_bitmap.html#a62602e28fc755def34d7e261bfd0b74a">SkBitmap::Config</a>);
<a name="l00228"></a>00228 
<a name="l00230"></a>00230     <a class="code" href="_sk_types_8h.html#ac13529d56d68425158ae36e3be60108a">SkDEBUGCODE</a>(<span class="keyword">static</span> <span class="keywordtype">void</span> UnitTest();)
<a name="l00233"></a>00233 <span class="keyword">protected</span>:
<a name="l00234"></a>00234     <span class="comment">// must be overridden in subclasses. This guy is called by decode(...)</span>
<a name="l00235"></a>00235     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_sk_image_decoder.html#a5b5380b89bede8b1c8a76dc1d5f2d491">onDecode</a>(<a class="code" href="class_sk_stream.html">SkStream</a>*, <a class="code" href="class_sk_bitmap.html">SkBitmap</a>* bitmap, <a class="code" href="class_sk_bitmap.html#a62602e28fc755def34d7e261bfd0b74a">SkBitmap::Config</a> pref,
<a name="l00236"></a>00236                           <a class="code" href="class_sk_image_decoder.html#a01cd7635ff77a7378071b343034e796a">Mode</a>) = 0;
<a name="l00237"></a>00237 
<a name="l00247"></a>00247 <span class="keyword">public</span>:
<a name="l00248"></a><a class="code" href="class_sk_image_decoder.html#acc7c88599901e9afb90dd7fa4e08cd0b">00248</a>     <span class="keywordtype">bool</span> <a class="code" href="class_sk_image_decoder.html#acc7c88599901e9afb90dd7fa4e08cd0b">shouldCancelDecode</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fShouldCancelDecode; }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 <span class="keyword">protected</span>:
<a name="l00251"></a>00251     <a class="code" href="class_sk_image_decoder.html#a51b6ea186f797b62aaf9e1895cdc92a9">SkImageDecoder</a>();
<a name="l00252"></a>00252 
<a name="l00253"></a>00253     <span class="comment">// helper function for decoders to handle the (common) case where there is only</span>
<a name="l00254"></a>00254     <span class="comment">// once choice available in the image file.</span>
<a name="l00255"></a>00255     <span class="keywordtype">bool</span> <a class="code" href="class_sk_image_decoder.html#a48184da9b7fdcdb04b480cb254d02f96">chooseFromOneChoice</a>(<a class="code" href="class_sk_bitmap.html#a62602e28fc755def34d7e261bfd0b74a">SkBitmap::Config</a> config, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height) <span class="keyword">const</span>;
<a name="l00256"></a>00256 
<a name="l00257"></a>00257     <span class="comment">/*  Helper for subclasses. Call this to allocate the pixel memory given the bitmap&apos;s</span>
<a name="l00258"></a>00258 <span class="comment">        width/height/rowbytes/config. Returns true on success. This method handles checking</span>
<a name="l00259"></a>00259 <span class="comment">        for an optional Allocator.</span>
<a name="l00260"></a>00260 <span class="comment">    */</span>
<a name="l00261"></a>00261     <span class="keywordtype">bool</span> <a class="code" href="class_sk_image_decoder.html#a886be59f0aee1b9d60efaa88a971dd5e">allocPixelRef</a>(<a class="code" href="class_sk_bitmap.html">SkBitmap</a>*, <a class="code" href="class_sk_color_table.html">SkColorTable</a>*) <span class="keyword">const</span>;
<a name="l00262"></a>00262 
<a name="l00263"></a>00263 <span class="keyword">private</span>:
<a name="l00264"></a>00264     Peeker*                 fPeeker;
<a name="l00265"></a>00265     Chooser*                fChooser;
<a name="l00266"></a>00266     SkBitmap::Allocator*    fAllocator;
<a name="l00267"></a>00267     <span class="keywordtype">int</span>                     fSampleSize;
<a name="l00268"></a>00268     <span class="keywordtype">bool</span>                    fDitherImage;
<a name="l00269"></a>00269     <span class="keyword">mutable</span> <span class="keywordtype">bool</span>            fShouldCancelDecode;
<a name="l00270"></a>00270 
<a name="l00271"></a>00271     <span class="comment">// illegal</span>
<a name="l00272"></a>00272     <a class="code" href="class_sk_image_decoder.html#a51b6ea186f797b62aaf9e1895cdc92a9">SkImageDecoder</a>(<span class="keyword">const</span> <a class="code" href="class_sk_image_decoder.html">SkImageDecoder</a>&amp;);
<a name="l00273"></a>00273     <a class="code" href="class_sk_image_decoder.html">SkImageDecoder</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="class_sk_image_decoder.html">SkImageDecoder</a>&amp;);
<a name="l00274"></a>00274 };
<a name="l00275"></a>00275 
<a name="l00282"></a><a class="code" href="class_sk_image_decoder_factory.html">00282</a> <span class="keyword">class </span><a class="code" href="class_sk_image_decoder_factory.html">SkImageDecoderFactory</a> : <span class="keyword">public</span> <a class="code" href="class_sk_ref_cnt.html">SkRefCnt</a> {
<a name="l00283"></a>00283 <span class="keyword">public</span>:
<a name="l00284"></a>00284     <span class="keyword">virtual</span> <a class="code" href="class_sk_image_decoder.html">SkImageDecoder</a>* <a class="code" href="class_sk_image_decoder_factory.html#ab841bdc47175d35b60f7b1cfd8a1424f">newDecoder</a>(<a class="code" href="class_sk_stream.html">SkStream</a>*) = 0;
<a name="l00285"></a>00285 };
<a name="l00286"></a>00286 
<a name="l00287"></a><a class="code" href="class_sk_default_image_decoder_factory.html">00287</a> <span class="keyword">class </span><a class="code" href="class_sk_default_image_decoder_factory.html">SkDefaultImageDecoderFactory</a> : <a class="code" href="class_sk_image_decoder_factory.html">SkImageDecoderFactory</a> {
<a name="l00288"></a>00288 <span class="keyword">public</span>:
<a name="l00289"></a>00289     <span class="comment">// calls SkImageDecoder::Factory(stream)</span>
<a name="l00290"></a><a class="code" href="class_sk_default_image_decoder_factory.html#ae694fabc600d31d01dab5a0830245af2">00290</a>     <span class="keyword">virtual</span> <a class="code" href="class_sk_image_decoder.html">SkImageDecoder</a>* <a class="code" href="class_sk_default_image_decoder_factory.html#ae694fabc600d31d01dab5a0830245af2">newDecoder</a>(<a class="code" href="class_sk_stream.html">SkStream</a>* stream) {
<a name="l00291"></a>00291         <span class="keywordflow">return</span> <a class="code" href="class_sk_image_decoder.html#a07701770b747e70359029b3dbb8463da">SkImageDecoder::Factory</a>(stream);
<a name="l00292"></a>00292     }
<a name="l00293"></a>00293 };
<a name="l00294"></a>00294 
<a name="l00295"></a>00295 
<a name="l00296"></a>00296 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Tue Oct 20 10:33:00 2009 for Skia by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
