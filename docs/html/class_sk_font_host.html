<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Skia: SkFontHost Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>SkFontHost Class Reference</h1><!-- doxytag: class="SkFontHost" -->
<p><code>#include &lt;<a class="el" href="_sk_font_host_8h_source.html">SkFontHost.h</a>&gt;</code></p>

<p><a href="class_sk_font_host-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#ab4c59e3427e7ba18951b6135a70fca6b">LCDOrientation</a> { <a class="el" href="class_sk_font_host.html#ab4c59e3427e7ba18951b6135a70fca6bace72ecf519d435b040832897995d74e8">kHorizontal_LCDOrientation</a> =  0, 
<a class="el" href="class_sk_font_host.html#ab4c59e3427e7ba18951b6135a70fca6ba3e59f79b15198b1e44f1d7159e74f5f1">kVertical_LCDOrientation</a> =  1
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#a3c225f0246d97616fddb7886d09a60b8">LCDOrder</a> { <a class="el" href="class_sk_font_host.html#a3c225f0246d97616fddb7886d09a60b8aa05304b827c95aa928507d90f12926df">kRGB_LCDOrder</a> =  0, 
<a class="el" href="class_sk_font_host.html#a3c225f0246d97616fddb7886d09a60b8afd74eaa0518e5c8d23ad48a861e4df14">kBGR_LCDOrder</a> =  1
 }</td></tr>
<tr><td colspan="2"><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_sk_typeface.html">SkTypeface</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#abe684ce134013866be2926ffebce73e2">CreateTypeface</a> (const <a class="el" href="class_sk_typeface.html">SkTypeface</a> *familyFace, const char famillyName[], <a class="el" href="class_sk_typeface.html#ac009ac5932d826d28e122d4518ffb5b5">SkTypeface::Style</a> style)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_sk_typeface.html">SkTypeface</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#a8cdd1dc6b336c90a9138d8dbe0436f43">CreateTypefaceFromStream</a> (<a class="el" href="class_sk_stream.html">SkStream</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_sk_typeface.html">SkTypeface</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#a5dbfc6d59543488d7f8c4593381e06d7">CreateTypefaceFromFile</a> (const char path[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#a57e6b464e6c7edd7a2726162efd97352">ValidFontID</a> (<a class="el" href="_sk_font_host_8h.html#a146d7da9f51dac39f3f560d204f2e2b2">SkFontID</a> uniqueID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_sk_stream.html">SkStream</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#a76f7d9a7837951f7278d4297049ed255">OpenStream</a> (<a class="el" href="_sk_font_host_8h.html#a146d7da9f51dac39f3f560d204f2e2b2">SkFontID</a> uniqueID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#a0bf111396a607ffed0a7bd3be78313c5">GetFileName</a> (<a class="el" href="_sk_font_host_8h.html#a146d7da9f51dac39f3f560d204f2e2b2">SkFontID</a> fontID, char path[], size_t length, int32_t *index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#a5a784ca3c601de21bf2be5cf8b960f84">Serialize</a> (const <a class="el" href="class_sk_typeface.html">SkTypeface</a> *, <a class="el" href="class_sk_w_stream.html">SkWStream</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_sk_typeface.html">SkTypeface</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#a42fc476d97c16538f6caa558b2091884">Deserialize</a> (<a class="el" href="class_sk_stream.html">SkStream</a> *)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_sk_scaler_context.html">SkScalerContext</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#a95a8f6289c1e758ca9480922a03a739d">CreateScalerContext</a> (const <a class="el" href="class_sk_descriptor.html">SkDescriptor</a> *desc)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#a2526f974d94c345a255169f84a7e9c37">NextLogicalFont</a> (<a class="el" href="_sk_font_host_8h.html#a146d7da9f51dac39f3f560d204f2e2b2">SkFontID</a> fontID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#ade793ad5ca9de915947642e95941e926">FilterRec</a> (<a class="el" href="struct_sk_scaler_context_1_1_rec.html">SkScalerContext::Rec</a> *rec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#a530976e06b92a5fa1490267785880663">CountTables</a> (<a class="el" href="_sk_font_host_8h.html#a146d7da9f51dac39f3f560d204f2e2b2">SkFontID</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#abfde825be50639a7ebccc71941250a30">GetTableTags</a> (<a class="el" href="_sk_font_host_8h.html#a146d7da9f51dac39f3f560d204f2e2b2">SkFontID</a>, <a class="el" href="_sk_font_host_8h.html#a28d8a2cdff79c22a5c1922d9e8901ba3">SkFontTableTag</a>[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#ac483854a88bfe72234b4a0b02c030aee">GetTableSize</a> (<a class="el" href="_sk_font_host_8h.html#a146d7da9f51dac39f3f560d204f2e2b2">SkFontID</a>, <a class="el" href="_sk_font_host_8h.html#a28d8a2cdff79c22a5c1922d9e8901ba3">SkFontTableTag</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#a13946a9ba0c14678036bd76b8dedba77">GetTableData</a> (<a class="el" href="_sk_font_host_8h.html#a146d7da9f51dac39f3f560d204f2e2b2">SkFontID</a> fontID, <a class="el" href="_sk_font_host_8h.html#a28d8a2cdff79c22a5c1922d9e8901ba3">SkFontTableTag</a> tag, size_t offset, size_t length, void *data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#a9c834f44e38ef83e6d3675728762e17c">ShouldPurgeFontCache</a> (size_t sizeAllocatedSoFar)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#a67453a414b722cc2f21409378f7d4446">ComputeGammaFlag</a> (const <a class="el" href="class_sk_paint.html">SkPaint</a> &amp;paint)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#aa2cf052ed21bf1ce6da02b1d0b0712d1">GetGammaTables</a> (const uint8_t *tables[2])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#ac1ebce7ceb8c5664edbe553eb3c34f4d">SetSubpixelOrientation</a> (<a class="el" href="class_sk_font_host.html#ab4c59e3427e7ba18951b6135a70fca6b">LCDOrientation</a> orientation)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_sk_font_host.html#ab4c59e3427e7ba18951b6135a70fca6b">LCDOrientation</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#aa41673a31fb2d3d418583375c8294aba">GetSubpixelOrientation</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#ab1778ea5d78168532366133e723638ca">SetSubpixelOrder</a> (<a class="el" href="class_sk_font_host.html#a3c225f0246d97616fddb7886d09a60b8">LCDOrder</a> order)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_sk_font_host.html#a3c225f0246d97616fddb7886d09a60b8">LCDOrder</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sk_font_host.html#af6ce050e2db3106f662dac0164c40cf6">GetSubpixelOrder</a> ()</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This class is ported to each environment. It is responsible for bridging the gap between the (sort of) abstract class <a class="el" href="class_sk_typeface.html">SkTypeface</a> and the platform-specific implementation that provides access to font files.</p>
<p>One basic task is for each create (subclass of) <a class="el" href="class_sk_typeface.html">SkTypeface</a>, the FontHost is resonsible for assigning a uniqueID. The ID should be unique for the underlying font file/data, not unique per typeface instance. Thus it is possible/common to request a typeface for the same font more than once (e.g. asking for the same font by name several times). The FontHost may return seperate typeface instances in that case, or it may choose to use a cache and return the same instance (but calling typeface-&gt;ref(), since the caller is always responsible for calling unref() on each instance that is returned). Either way, the fontID for those instance(s) will be the same. In addition, the fontID should never be set to 0. That value is used as a sentinel to indicate no-font-id.</p>
<p>The major aspects are: 1) Given either a name/style, return a subclass of <a class="el" href="class_sk_typeface.html">SkTypeface</a> that references the closest matching font available on the host system. 2) Given the data for a font (either in a stream or a file name), return a typeface that allows access to that data. 3) Each typeface instance carries a 32bit ID for its corresponding font. <a class="el" href="class_sk_font_host.html">SkFontHost</a> turns that ID into a stream to access the font's data. 4) Given a font ID, return a subclass of <a class="el" href="class_sk_scaler_context.html">SkScalerContext</a>, which connects a font scaler (e.g. freetype or other) to the font's data. 5) Utilites to manage the font cache (budgeting) and gamma correction </p>

<p>Definition at line <a class="el" href="_sk_font_host_8h_source.html#l00059">59</a> of file <a class="el" href="_sk_font_host_8h_source.html">SkFontHost.h</a>.</p>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a3c225f0246d97616fddb7886d09a60b8"></a><!-- doxytag: member="SkFontHost::LCDOrder" ref="a3c225f0246d97616fddb7886d09a60b8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_sk_font_host.html#a3c225f0246d97616fddb7886d09a60b8">SkFontHost::LCDOrder</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>LCD color elements can vary in order. For subpixel text we need to know the order which the LCDs uses so that the color fringes are in the correct place.</p>
<p>Note, if you change this after startup, you'll need to flush the glyph cache because it'll have the wrong type of masks cached. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a3c225f0246d97616fddb7886d09a60b8aa05304b827c95aa928507d90f12926df"></a><!-- doxytag: member="kRGB_LCDOrder" ref="a3c225f0246d97616fddb7886d09a60b8aa05304b827c95aa928507d90f12926df" args="" -->kRGB_LCDOrder</em>&nbsp;</td><td>
<p>this is the default </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a3c225f0246d97616fddb7886d09a60b8afd74eaa0518e5c8d23ad48a861e4df14"></a><!-- doxytag: member="kBGR_LCDOrder" ref="a3c225f0246d97616fddb7886d09a60b8afd74eaa0518e5c8d23ad48a861e4df14" args="" -->kBGR_LCDOrder</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="_sk_font_host_8h_source.html#l00258">258</a> of file <a class="el" href="_sk_font_host_8h_source.html">SkFontHost.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab4c59e3427e7ba18951b6135a70fca6b"></a><!-- doxytag: member="SkFontHost::LCDOrientation" ref="ab4c59e3427e7ba18951b6135a70fca6b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_sk_font_host.html#ab4c59e3427e7ba18951b6135a70fca6b">SkFontHost::LCDOrientation</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>LCDs either have their color elements arranged horizontally or vertically. When rendering subpixel glyphs we need to know which way round they are.</p>
<p>Note, if you change this after startup, you'll need to flush the glyph cache because it'll have the wrong type of masks cached. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ab4c59e3427e7ba18951b6135a70fca6bace72ecf519d435b040832897995d74e8"></a><!-- doxytag: member="kHorizontal_LCDOrientation" ref="ab4c59e3427e7ba18951b6135a70fca6bace72ecf519d435b040832897995d74e8" args="" -->kHorizontal_LCDOrientation</em>&nbsp;</td><td>
<p>this is the default </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ab4c59e3427e7ba18951b6135a70fca6ba3e59f79b15198b1e44f1d7159e74f5f1"></a><!-- doxytag: member="kVertical_LCDOrientation" ref="ab4c59e3427e7ba18951b6135a70fca6ba3e59f79b15198b1e44f1d7159e74f5f1" args="" -->kVertical_LCDOrientation</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="_sk_font_host_8h_source.html#l00243">243</a> of file <a class="el" href="_sk_font_host_8h_source.html">SkFontHost.h</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a67453a414b722cc2f21409378f7d4446"></a><!-- doxytag: member="SkFontHost::ComputeGammaFlag" ref="a67453a414b722cc2f21409378f7d4446" args="(const SkPaint &amp;paint)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int SkFontHost::ComputeGammaFlag </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_sk_paint.html">SkPaint</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>paint</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return <a class="el" href="class_sk_scaler_context.html">SkScalerContext</a> gamma flag, or 0, based on the paint that will be used to draw something with antialiasing. </p>

</div>
</div>
<a class="anchor" id="a530976e06b92a5fa1490267785880663"></a><!-- doxytag: member="SkFontHost::CountTables" ref="a530976e06b92a5fa1490267785880663" args="(SkFontID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int SkFontHost::CountTables </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_sk_font_host_8h.html#a146d7da9f51dac39f3f560d204f2e2b2">SkFontID</a>&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the number of tables in the font </p>

</div>
</div>
<a class="anchor" id="a95a8f6289c1e758ca9480922a03a739d"></a><!-- doxytag: member="SkFontHost::CreateScalerContext" ref="a95a8f6289c1e758ca9480922a03a739d" args="(const SkDescriptor *desc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_sk_scaler_context.html">SkScalerContext</a>* SkFontHost::CreateScalerContext </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_sk_descriptor.html">SkDescriptor</a> *&nbsp;</td>
          <td class="paramname"> <em>desc</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return a subclass of SkScalarContext </p>

</div>
</div>
<a class="anchor" id="abe684ce134013866be2926ffebce73e2"></a><!-- doxytag: member="SkFontHost::CreateTypeface" ref="abe684ce134013866be2926ffebce73e2" args="(const SkTypeface *familyFace, const char famillyName[], SkTypeface::Style style)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_sk_typeface.html">SkTypeface</a>* SkFontHost::CreateTypeface </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_sk_typeface.html">SkTypeface</a> *&nbsp;</td>
          <td class="paramname"> <em>familyFace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>famillyName</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_sk_typeface.html#ac009ac5932d826d28e122d4518ffb5b5">SkTypeface::Style</a>&nbsp;</td>
          <td class="paramname"> <em>style</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return a new, closest matching typeface given either an existing family (specified by a typeface in that family) or by a familyName, and a requested style. 1) If familyFace is null, use famillyName. 2) If famillyName is null, use familyFace. 3) If both are null, return the default font that best matches style </p>

</div>
</div>
<a class="anchor" id="a5dbfc6d59543488d7f8c4593381e06d7"></a><!-- doxytag: member="SkFontHost::CreateTypefaceFromFile" ref="a5dbfc6d59543488d7f8c4593381e06d7" args="(const char path[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_sk_typeface.html">SkTypeface</a>* SkFontHost::CreateTypefaceFromFile </td>
          <td>(</td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>path</em>[]</td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return a new typeface from the specified file path. If the file does not represent a valid font, this returns null. If a typeface is returned, the caller is responsible for calling unref() when it is no longer used. </p>

</div>
</div>
<a class="anchor" id="a8cdd1dc6b336c90a9138d8dbe0436f43"></a><!-- doxytag: member="SkFontHost::CreateTypefaceFromStream" ref="a8cdd1dc6b336c90a9138d8dbe0436f43" args="(SkStream *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_sk_typeface.html">SkTypeface</a>* SkFontHost::CreateTypefaceFromStream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_sk_stream.html">SkStream</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return a new typeface given the data buffer. If the data does not represent a valid font, returns null.</p>
<p>If a typeface instance is returned, the caller is responsible for calling unref() on the typeface when they are finished with it.</p>
<p>The returned typeface may or may not have called ref() on the stream parameter. If the typeface has not called ref(), then it may have made a copy of the releveant data. In either case, the caller is still responsible for its refcnt ownership of the stream. </p>

</div>
</div>
<a class="anchor" id="a42fc476d97c16538f6caa558b2091884"></a><!-- doxytag: member="SkFontHost::Deserialize" ref="a42fc476d97c16538f6caa558b2091884" args="(SkStream *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_sk_typeface.html">SkTypeface</a>* SkFontHost::Deserialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_sk_stream.html">SkStream</a> *&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Given a stream created by <a class="el" href="class_sk_font_host.html#a5a784ca3c601de21bf2be5cf8b960f84">Serialize()</a>, return a new typeface (like CreateTypeface) or return NULL if no match is found. </p>

</div>
</div>
<a class="anchor" id="ade793ad5ca9de915947642e95941e926"></a><!-- doxytag: member="SkFontHost::FilterRec" ref="ade793ad5ca9de915947642e95941e926" args="(SkScalerContext::Rec *rec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void SkFontHost::FilterRec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_sk_scaler_context_1_1_rec.html">SkScalerContext::Rec</a> *&nbsp;</td>
          <td class="paramname"> <em>rec</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Given a filled-out rec, the fonthost may decide to modify it to reflect what the host is actually capable of fulfilling. For example, if the rec is requesting a level of hinting that, for this host, maps some other level (e.g. kFull -&gt; kNormal), it should update the rec to reflect what will actually be done. This is an optimization so that the font cache does not contain different recs (i.e. keys) that in reality map to the same output.</p>
<p>A lazy (but valid) fonthost can do nothing in its FilterRec routine. </p>

</div>
</div>
<a class="anchor" id="a0bf111396a607ffed0a7bd3be78313c5"></a><!-- doxytag: member="SkFontHost::GetFileName" ref="a0bf111396a607ffed0a7bd3be78313c5" args="(SkFontID fontID, char path[], size_t length, int32_t *index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static size_t SkFontHost::GetFileName </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_sk_font_host_8h.html#a146d7da9f51dac39f3f560d204f2e2b2">SkFontID</a>&nbsp;</td>
          <td class="paramname"> <em>fontID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>path</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t *&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Some fonts are stored in files. If that is true for the fontID, then this returns the byte length of the full file path. If path is not null, then the full path is copied into path (allocated by the caller), up to length bytes. If index is not null, then it is set to the truetype collection index for this font, or 0 if the font is not in a collection.</p>
<p>Note: GetFileName does not assume that path is a null-terminated string, so when it succeeds, it only copies the bytes of the file name and nothing else (i.e. it copies exactly the number of bytes returned by the function. If the caller wants to treat path[] as a C string, it must be sure that it is allocated at least 1 byte larger than the returned size, and it must copy in the terminating 0.</p>
<p>If the fontID does not correspond to a file, then the function returns 0, and the path and index parameters are ignored.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fontID</em>&nbsp;</td><td>The font whose file name is being queried </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>Either NULL, or storage for receiving up to length bytes of the font's file name. Allocated by the caller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>length</em>&nbsp;</td><td>The maximum space allocated in path (by the caller). Ignored if path is NULL. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>index</em>&nbsp;</td><td>Either NULL, or receives the TTC index for this font. If the font is not a TTC, then will be set to 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The byte length of th font's file name, or 0 if the font is not baked by a file. </dd></dl>

</div>
</div>
<a class="anchor" id="aa2cf052ed21bf1ce6da02b1d0b0712d1"></a><!-- doxytag: member="SkFontHost::GetGammaTables" ref="aa2cf052ed21bf1ce6da02b1d0b0712d1" args="(const uint8_t *tables[2])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void SkFontHost::GetGammaTables </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&nbsp;</td>
          <td class="paramname"> <em>tables</em>[2]</td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return NULL or a pointer to 256 bytes for the black (table[0]) and white (table[1]) gamma tables. </p>

</div>
</div>
<a class="anchor" id="af6ce050e2db3106f662dac0164c40cf6"></a><!-- doxytag: member="SkFontHost::GetSubpixelOrder" ref="af6ce050e2db3106f662dac0164c40cf6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_sk_font_host.html#a3c225f0246d97616fddb7886d09a60b8">LCDOrder</a> SkFontHost::GetSubpixelOrder </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa41673a31fb2d3d418583375c8294aba"></a><!-- doxytag: member="SkFontHost::GetSubpixelOrientation" ref="aa41673a31fb2d3d418583375c8294aba" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_sk_font_host.html#ab4c59e3427e7ba18951b6135a70fca6b">LCDOrientation</a> SkFontHost::GetSubpixelOrientation </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a13946a9ba0c14678036bd76b8dedba77"></a><!-- doxytag: member="SkFontHost::GetTableData" ref="a13946a9ba0c14678036bd76b8dedba77" args="(SkFontID fontID, SkFontTableTag tag, size_t offset, size_t length, void *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static size_t SkFontHost::GetTableData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_sk_font_host_8h.html#a146d7da9f51dac39f3f560d204f2e2b2">SkFontID</a>&nbsp;</td>
          <td class="paramname"> <em>fontID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_sk_font_host_8h.html#a28d8a2cdff79c22a5c1922d9e8901ba3">SkFontTableTag</a>&nbsp;</td>
          <td class="paramname"> <em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Copy the contents of a table into data (allocated by the caller). Note that the contents of the table will be in their native endian order (which for most truetype tables is big endian). If the table tag is not found, or there is an error copying the data, then 0 is returned. If this happens, it is possible that some or all of the memory pointed to by data may have been written to, even though an error has occured.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fontID</em>&nbsp;</td><td>the font to copy the table from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tag</em>&nbsp;</td><td>The table tag whose contents are to be copied </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>The offset in bytes into the table's contents where the copy should start from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>length</em>&nbsp;</td><td>The number of bytes, starting at offset, of table data to copy. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>storage address where the table contents are copied to </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of bytes actually copied into data. If offset+length exceeds the table's size, then only the bytes up to the table's size are actually copied, and this is the value returned. If offset &gt; the table's size, or tag is not a valid table, then 0 is returned. </dd></dl>

</div>
</div>
<a class="anchor" id="ac483854a88bfe72234b4a0b02c030aee"></a><!-- doxytag: member="SkFontHost::GetTableSize" ref="ac483854a88bfe72234b4a0b02c030aee" args="(SkFontID, SkFontTableTag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static size_t SkFontHost::GetTableSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_sk_font_host_8h.html#a146d7da9f51dac39f3f560d204f2e2b2">SkFontID</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_sk_font_host_8h.html#a28d8a2cdff79c22a5c1922d9e8901ba3">SkFontTableTag</a>&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Given a table tag, return the size of its contents, or 0 if not present </p>

</div>
</div>
<a class="anchor" id="abfde825be50639a7ebccc71941250a30"></a><!-- doxytag: member="SkFontHost::GetTableTags" ref="abfde825be50639a7ebccc71941250a30" args="(SkFontID, SkFontTableTag[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int SkFontHost::GetTableTags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_sk_font_host_8h.html#a146d7da9f51dac39f3f560d204f2e2b2">SkFontID</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_sk_font_host_8h.html#a28d8a2cdff79c22a5c1922d9e8901ba3">SkFontTableTag</a>&nbsp;</td>
          <td class="paramname">[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Copy into tags[] (allocated by the caller) the list of table tags in the font, and return the number. This will be the same as <a class="el" href="class_sk_font_host.html#a530976e06b92a5fa1490267785880663">CountTables()</a> or 0 if an error occured. </p>

</div>
</div>
<a class="anchor" id="a2526f974d94c345a255169f84a7e9c37"></a><!-- doxytag: member="SkFontHost::NextLogicalFont" ref="a2526f974d94c345a255169f84a7e9c37" args="(SkFontID fontID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t SkFontHost::NextLogicalFont </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_sk_font_host_8h.html#a146d7da9f51dac39f3f560d204f2e2b2">SkFontID</a>&nbsp;</td>
          <td class="paramname"> <em>fontID</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Given a "current" fontID, return the next logical fontID to use when searching fonts for a given unicode value. Typically the caller will query a given font, and if a unicode value is not supported, they will call this, and if 0 is not returned, will search that font, and so on. This process must be finite, and when the fonthost sees a font with no logical successor, it must return 0. </p>

</div>
</div>
<a class="anchor" id="a76f7d9a7837951f7278d4297049ed255"></a><!-- doxytag: member="SkFontHost::OpenStream" ref="a76f7d9a7837951f7278d4297049ed255" args="(SkFontID uniqueID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_sk_stream.html">SkStream</a>* SkFontHost::OpenStream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_sk_font_host_8h.html#a146d7da9f51dac39f3f560d204f2e2b2">SkFontID</a>&nbsp;</td>
          <td class="paramname"> <em>uniqueID</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return a new stream to read the font data, or null if the uniqueID does not match an existing typeface. .The caller must call stream-&gt;unref() when it is finished reading the data. </p>

</div>
</div>
<a class="anchor" id="a5a784ca3c601de21bf2be5cf8b960f84"></a><!-- doxytag: member="SkFontHost::Serialize" ref="a5a784ca3c601de21bf2be5cf8b960f84" args="(const SkTypeface *, SkWStream *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void SkFontHost::Serialize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_sk_typeface.html">SkTypeface</a> *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_sk_w_stream.html">SkWStream</a> *&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Write a unique identifier to the stream, so that the same typeface can be retrieved with <a class="el" href="class_sk_font_host.html#a42fc476d97c16538f6caa558b2091884">Deserialize()</a>. </p>

</div>
</div>
<a class="anchor" id="ab1778ea5d78168532366133e723638ca"></a><!-- doxytag: member="SkFontHost::SetSubpixelOrder" ref="ab1778ea5d78168532366133e723638ca" args="(LCDOrder order)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void SkFontHost::SetSubpixelOrder </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_sk_font_host.html#a3c225f0246d97616fddb7886d09a60b8">LCDOrder</a>&nbsp;</td>
          <td class="paramname"> <em>order</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac1ebce7ceb8c5664edbe553eb3c34f4d"></a><!-- doxytag: member="SkFontHost::SetSubpixelOrientation" ref="ac1ebce7ceb8c5664edbe553eb3c34f4d" args="(LCDOrientation orientation)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void SkFontHost::SetSubpixelOrientation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_sk_font_host.html#ab4c59e3427e7ba18951b6135a70fca6b">LCDOrientation</a>&nbsp;</td>
          <td class="paramname"> <em>orientation</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9c834f44e38ef83e6d3675728762e17c"></a><!-- doxytag: member="SkFontHost::ShouldPurgeFontCache" ref="a9c834f44e38ef83e6d3675728762e17c" args="(size_t sizeAllocatedSoFar)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static size_t SkFontHost::ShouldPurgeFontCache </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>sizeAllocatedSoFar</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the number of bytes (approx) that should be purged from the font cache. The input parameter is the cache's estimate of how much as been allocated by the cache so far. To purge (basically) everything, return the input parameter. To purge nothing, return 0 </p>

</div>
</div>
<a class="anchor" id="a57e6b464e6c7edd7a2726162efd97352"></a><!-- doxytag: member="SkFontHost::ValidFontID" ref="a57e6b464e6c7edd7a2726162efd97352" args="(SkFontID uniqueID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool SkFontHost::ValidFontID </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_sk_font_host_8h.html#a146d7da9f51dac39f3f560d204f2e2b2">SkFontID</a>&nbsp;</td>
          <td class="paramname"> <em>uniqueID</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns true if the specified unique ID matches an existing font. Returning false is similar to calling OpenStream with an invalid ID, which will return NULL in that case. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/core/<a class="el" href="_sk_font_host_8h_source.html">SkFontHost.h</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Tue Oct 20 11:03:42 2009 for Skia by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
