<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Skia: include/core/SkStream.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>include/core/SkStream.h</h1><a href="_sk_stream_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (C) 2006 The Android Open Source Project</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<a name="l00005"></a>00005 <span class="comment"> * you may not use this file except in compliance with the License.</span>
<a name="l00006"></a>00006 <span class="comment"> * You may obtain a copy of the License at</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> *      http://www.apache.org/licenses/LICENSE-2.0</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> * Unless required by applicable law or agreed to in writing, software</span>
<a name="l00011"></a>00011 <span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<a name="l00012"></a>00012 <span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00013"></a>00013 <span class="comment"> * See the License for the specific language governing permissions and</span>
<a name="l00014"></a>00014 <span class="comment"> * limitations under the License.</span>
<a name="l00015"></a>00015 <span class="comment"> */</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="preprocessor">#ifndef SkStream_DEFINED</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span><span class="preprocessor">#define SkStream_DEFINED</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;<a class="code" href="_sk_ref_cnt_8h.html">SkRefCnt.h</a>&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;<a class="code" href="_sk_scalar_8h.html">SkScalar.h</a>&quot;</span>
<a name="l00022"></a>00022 
<a name="l00023"></a><a class="code" href="class_sk_stream.html">00023</a> <span class="keyword">class </span><a class="code" href="class_sk_stream.html">SkStream</a> : <span class="keyword">public</span> <a class="code" href="class_sk_ref_cnt.html">SkRefCnt</a> {
<a name="l00024"></a>00024 <span class="keyword">public</span>:
<a name="l00025"></a>00025     <span class="keyword">virtual</span> <a class="code" href="class_sk_stream.html#aadf03f4e8fb909bf0b968925425831b9">~SkStream</a>();
<a name="l00029"></a>00029     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_sk_stream.html#abf7148ef7468ffaf716b024c870a77cc">rewind</a>() = 0;
<a name="l00033"></a>00033     <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="class_sk_stream.html#ad9a65d3656c07146a95e4391c8369fd8">getFileName</a>();
<a name="l00042"></a>00042     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="class_sk_stream.html#afae3344ee277d55aec3a4fa5fead387a">read</a>(<span class="keywordtype">void</span>* buffer, <span class="keywordtype">size_t</span> size) = 0;
<a name="l00043"></a>00043 
<a name="l00046"></a><a class="code" href="class_sk_stream.html#a103b4edc304d83e4ada00e6cd0399d43">00046</a>     <span class="keywordtype">size_t</span> <a class="code" href="class_sk_stream.html#a103b4edc304d83e4ada00e6cd0399d43">getLength</a>() { <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_sk_stream.html#afae3344ee277d55aec3a4fa5fead387a">read</a>(NULL, 0); }
<a name="l00047"></a>00047     
<a name="l00051"></a>00051     <span class="keywordtype">size_t</span> <a class="code" href="class_sk_stream.html#a641307452de48399c318d8c98ccd7ffd">skip</a>(<span class="keywordtype">size_t</span> bytes);
<a name="l00052"></a>00052 
<a name="l00058"></a>00058     <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="class_sk_stream.html#a584dce4c2f1af230c1951b5d90da52e8">getMemoryBase</a>();
<a name="l00059"></a>00059 
<a name="l00060"></a>00060     int8_t   <a class="code" href="class_sk_stream.html#a8d25edbf0802b8ccda4d9cc1ebc6466d">readS8</a>();
<a name="l00061"></a>00061     int16_t  <a class="code" href="class_sk_stream.html#aaf4279d156c499b51ff1c4100d852b6b">readS16</a>();
<a name="l00062"></a>00062     int32_t  <a class="code" href="class_sk_stream.html#a857902ef8cd30d6baa37bf2a14246efe">readS32</a>();
<a name="l00063"></a>00063 
<a name="l00064"></a><a class="code" href="class_sk_stream.html#a1eb0b01164fa8e0a9f8c479ed4e9fc39">00064</a>     uint8_t  <a class="code" href="class_sk_stream.html#a1eb0b01164fa8e0a9f8c479ed4e9fc39">readU8</a>() { <span class="keywordflow">return</span> (uint8_t)this-&gt;<a class="code" href="class_sk_stream.html#a8d25edbf0802b8ccda4d9cc1ebc6466d">readS8</a>(); }
<a name="l00065"></a><a class="code" href="class_sk_stream.html#a6f65e5cc9cfb1a39617fd782da88b3db">00065</a>     uint16_t <a class="code" href="class_sk_stream.html#a6f65e5cc9cfb1a39617fd782da88b3db">readU16</a>() { <span class="keywordflow">return</span> (uint16_t)this-&gt;<a class="code" href="class_sk_stream.html#aaf4279d156c499b51ff1c4100d852b6b">readS16</a>(); }
<a name="l00066"></a><a class="code" href="class_sk_stream.html#ab62658031d183df81c3a54aafa37c1b0">00066</a>     uint32_t <a class="code" href="class_sk_stream.html#ab62658031d183df81c3a54aafa37c1b0">readU32</a>() { <span class="keywordflow">return</span> (uint32_t)this-&gt;<a class="code" href="class_sk_stream.html#a857902ef8cd30d6baa37bf2a14246efe">readS32</a>(); }
<a name="l00067"></a>00067 
<a name="l00068"></a><a class="code" href="class_sk_stream.html#a7d574bd52ef95ecc483d38a279505c2c">00068</a>     <span class="keywordtype">bool</span>     <a class="code" href="class_sk_stream.html#a7d574bd52ef95ecc483d38a279505c2c">readBool</a>() { <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_sk_stream.html#a1eb0b01164fa8e0a9f8c479ed4e9fc39">readU8</a>() != 0; }
<a name="l00069"></a>00069     <a class="code" href="_sk_scalar_8h.html#a407e363d56d824ed93bd6d1fda2effcf">SkScalar</a> <a class="code" href="class_sk_stream.html#ad174dff9c54c8e88b16c8c9752f4037a">readScalar</a>();
<a name="l00070"></a>00070     <span class="keywordtype">size_t</span>   <a class="code" href="class_sk_stream.html#a7b15d26ebee89689ac714857b367a459">readPackedUInt</a>();
<a name="l00071"></a>00071 };
<a name="l00072"></a>00072 
<a name="l00073"></a><a class="code" href="class_sk_w_stream.html">00073</a> <span class="keyword">class </span><a class="code" href="class_sk_w_stream.html">SkWStream</a> : SkNoncopyable {
<a name="l00074"></a>00074 <span class="keyword">public</span>:
<a name="l00075"></a>00075     <span class="keyword">virtual</span> <a class="code" href="class_sk_w_stream.html#a903ddb5376c3f7ac7055415c03003ca0">~SkWStream</a>();
<a name="l00076"></a>00076 
<a name="l00082"></a>00082     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_sk_w_stream.html#a22cffc15316b4da5b4ecfd974374239a">write</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* buffer, <span class="keywordtype">size_t</span> size) = 0;
<a name="l00083"></a>00083     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sk_w_stream.html#af95caa529b48c83e06c4872ed0d433e1">newline</a>();
<a name="l00084"></a>00084     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sk_w_stream.html#af701a3b3a56b27b86742bac2ad0760d0">flush</a>();
<a name="l00085"></a>00085 
<a name="l00086"></a>00086     <span class="comment">// helpers</span>
<a name="l00087"></a>00087     
<a name="l00088"></a>00088     <span class="keywordtype">bool</span>    <a class="code" href="class_sk_w_stream.html#a6450cbc5470f35a6a74835f8d5354c40">write8</a>(<a class="code" href="_sk_types_8h.html#a6882636f582abdb2a130b7e5ff38aa83">U8CPU</a>);
<a name="l00089"></a>00089     <span class="keywordtype">bool</span>    <a class="code" href="class_sk_w_stream.html#a8d83509d40e13f16647481d2dcd7958b">write16</a>(<a class="code" href="_sk_types_8h.html#a22d66c121dc25410d7ce78c59cbd4e64">U16CPU</a>);
<a name="l00090"></a>00090     <span class="keywordtype">bool</span>    <a class="code" href="class_sk_w_stream.html#ae7b32d903b6aa22faef3b110b35a3822">write32</a>(uint32_t);
<a name="l00091"></a>00091 
<a name="l00092"></a>00092     <span class="keywordtype">bool</span>    <a class="code" href="class_sk_w_stream.html#af53529ec3c94daf4341ae0ad7715163f">writeText</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> text[]);
<a name="l00093"></a>00093     <span class="keywordtype">bool</span>    <a class="code" href="class_sk_w_stream.html#ab348a40c5c509e35df94a483c1368897">writeDecAsText</a>(int32_t);
<a name="l00094"></a>00094     <span class="keywordtype">bool</span>    <a class="code" href="class_sk_w_stream.html#a7f6b9677924f38f8a6e1c6b21e8bf03d">writeHexAsText</a>(uint32_t, <span class="keywordtype">int</span> minDigits = 0);
<a name="l00095"></a>00095     <span class="keywordtype">bool</span>    <a class="code" href="class_sk_w_stream.html#a37636af69f757a06303145386c313e1d">writeScalarAsText</a>(<a class="code" href="_sk_scalar_8h.html#a407e363d56d824ed93bd6d1fda2effcf">SkScalar</a>);
<a name="l00096"></a>00096     
<a name="l00097"></a><a class="code" href="class_sk_w_stream.html#adcf9bde6dc429ee3a083581a922e3fbc">00097</a>     <span class="keywordtype">bool</span>    <a class="code" href="class_sk_w_stream.html#adcf9bde6dc429ee3a083581a922e3fbc">writeBool</a>(<span class="keywordtype">bool</span> v) { <span class="keywordflow">return</span> this-&gt;<a class="code" href="class_sk_w_stream.html#a6450cbc5470f35a6a74835f8d5354c40">write8</a>(v); }
<a name="l00098"></a>00098     <span class="keywordtype">bool</span>    <a class="code" href="class_sk_w_stream.html#ae8ed4a0da03c5205d75890bd49d54c1d">writeScalar</a>(<a class="code" href="_sk_scalar_8h.html#a407e363d56d824ed93bd6d1fda2effcf">SkScalar</a>);
<a name="l00099"></a>00099     <span class="keywordtype">bool</span>    <a class="code" href="class_sk_w_stream.html#a0aa91451d3ddbba3efc60c8f5e9c02b9">writePackedUInt</a>(<span class="keywordtype">size_t</span>);
<a name="l00100"></a>00100     
<a name="l00101"></a>00101     <span class="keywordtype">bool</span> <a class="code" href="class_sk_w_stream.html#ab1dc8a7ce624008e813786660533d4e1">writeStream</a>(<a class="code" href="class_sk_stream.html">SkStream</a>* input, <span class="keywordtype">size_t</span> length);
<a name="l00102"></a>00102 };
<a name="l00103"></a>00103 
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 <span class="preprocessor">#include &quot;<a class="code" href="_sk_string_8h.html">SkString.h</a>&quot;</span>
<a name="l00107"></a>00107 
<a name="l00108"></a>00108 <span class="keyword">struct </span>SkFILE;
<a name="l00109"></a>00109 
<a name="l00113"></a><a class="code" href="class_sk_f_i_l_e_stream.html">00113</a> <span class="keyword">class </span><a class="code" href="class_sk_f_i_l_e_stream.html">SkFILEStream</a> : <span class="keyword">public</span> <a class="code" href="class_sk_stream.html">SkStream</a> {
<a name="l00114"></a>00114 <span class="keyword">public</span>:
<a name="l00118"></a>00118     <span class="keyword">explicit</span> <a class="code" href="class_sk_f_i_l_e_stream.html#a6159d763990e32097551e4e01894d99b">SkFILEStream</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> path[] = NULL);
<a name="l00119"></a>00119     <span class="keyword">virtual</span> <a class="code" href="class_sk_f_i_l_e_stream.html#ac90e9bc3e6fcecc426606dbe01d1a60b">~SkFILEStream</a>();
<a name="l00120"></a>00120 
<a name="l00123"></a><a class="code" href="class_sk_f_i_l_e_stream.html#a2098ecaaa9ccad91822df002ae0592fc">00123</a>     <span class="keywordtype">bool</span> <a class="code" href="class_sk_f_i_l_e_stream.html#a2098ecaaa9ccad91822df002ae0592fc">isValid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fFILE != NULL; }
<a name="l00127"></a>00127     <span class="keywordtype">void</span> <a class="code" href="class_sk_f_i_l_e_stream.html#a17c94df576ffd8681c0fb652b4f28f6e">setPath</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> path[]);
<a name="l00128"></a>00128 
<a name="l00129"></a>00129     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_sk_f_i_l_e_stream.html#a474207f7b6a6d2c18ce5a7984dae5e5c">rewind</a>();
<a name="l00130"></a>00130     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="class_sk_f_i_l_e_stream.html#a42d45c1dbb199b0158c5881ddb75f8bd">read</a>(<span class="keywordtype">void</span>* buffer, <span class="keywordtype">size_t</span> size);
<a name="l00131"></a>00131     <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="class_sk_f_i_l_e_stream.html#acae1f7cec474cbb4e1a4319d259cbb50">getFileName</a>();
<a name="l00132"></a>00132 
<a name="l00133"></a>00133 <span class="keyword">private</span>:
<a name="l00134"></a>00134     SkFILE*     fFILE;
<a name="l00135"></a>00135     <a class="code" href="class_sk_string.html">SkString</a>    fName;
<a name="l00136"></a>00136 };
<a name="l00137"></a>00137 
<a name="l00140"></a><a class="code" href="class_sk_f_d_stream.html">00140</a> <span class="keyword">class </span><a class="code" href="class_sk_f_d_stream.html">SkFDStream</a> : <span class="keyword">public</span> <a class="code" href="class_sk_stream.html">SkStream</a> {
<a name="l00141"></a>00141 <span class="keyword">public</span>:
<a name="l00146"></a>00146     <a class="code" href="class_sk_f_d_stream.html#a2a31324d7ff691870ec325b3560976a3">SkFDStream</a>(<span class="keywordtype">int</span> fileDesc, <span class="keywordtype">bool</span> closeWhenDone);
<a name="l00147"></a>00147     <span class="keyword">virtual</span> <a class="code" href="class_sk_f_d_stream.html#a9b1d4ace55f1115ed723a063a08139fe">~SkFDStream</a>();
<a name="l00148"></a>00148     
<a name="l00151"></a><a class="code" href="class_sk_f_d_stream.html#a8aa9fcac709c69b76e0edce26c63388c">00151</a>     <span class="keywordtype">bool</span> <a class="code" href="class_sk_f_d_stream.html#a8aa9fcac709c69b76e0edce26c63388c">isValid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fFD &gt;= 0; }
<a name="l00152"></a>00152     
<a name="l00153"></a>00153     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_sk_f_d_stream.html#ad74443d11cd59351a2d9b70d75423faa">rewind</a>();
<a name="l00154"></a>00154     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="class_sk_f_d_stream.html#a065160c39cccce2a80c589c63981ae9e">read</a>(<span class="keywordtype">void</span>* buffer, <span class="keywordtype">size_t</span> size);
<a name="l00155"></a><a class="code" href="class_sk_f_d_stream.html#a6a0dc81fb30d74e0ce57d8146f052847">00155</a>     <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="class_sk_f_d_stream.html#a6a0dc81fb30d74e0ce57d8146f052847">getFileName</a>() { <span class="keywordflow">return</span> NULL; }
<a name="l00156"></a>00156     
<a name="l00157"></a>00157 <span class="keyword">private</span>:
<a name="l00158"></a>00158     <span class="keywordtype">int</span>     fFD;
<a name="l00159"></a>00159     <span class="keywordtype">bool</span>    fCloseWhenDone;
<a name="l00160"></a>00160 };
<a name="l00161"></a>00161 
<a name="l00162"></a><a class="code" href="class_sk_memory_stream.html">00162</a> <span class="keyword">class </span><a class="code" href="class_sk_memory_stream.html">SkMemoryStream</a> : <span class="keyword">public</span> <a class="code" href="class_sk_stream.html">SkStream</a> {
<a name="l00163"></a>00163 <span class="keyword">public</span>:
<a name="l00164"></a>00164     <a class="code" href="class_sk_memory_stream.html#a1a1774d4801757f0cf5d87f42c5d84ee">SkMemoryStream</a>();
<a name="l00167"></a>00167     <a class="code" href="class_sk_memory_stream.html#a1a1774d4801757f0cf5d87f42c5d84ee">SkMemoryStream</a>(<span class="keywordtype">size_t</span> length);
<a name="l00170"></a>00170     <a class="code" href="class_sk_memory_stream.html#a1a1774d4801757f0cf5d87f42c5d84ee">SkMemoryStream</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keywordtype">size_t</span> length, <span class="keywordtype">bool</span> copyData = <span class="keyword">false</span>);
<a name="l00171"></a>00171     <span class="keyword">virtual</span> <a class="code" href="class_sk_memory_stream.html#a3b5779cdaa5bf3d0e7347d717795d243">~SkMemoryStream</a>();
<a name="l00172"></a>00172 
<a name="l00177"></a>00177     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sk_memory_stream.html#a89f146316ae54ddac6370bbdf0e20b4b">setMemory</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keywordtype">size_t</span> length,
<a name="l00178"></a>00178                            <span class="keywordtype">bool</span> copyData = <span class="keyword">false</span>);
<a name="l00179"></a>00179     <span class="keywordtype">void</span> <a class="code" href="class_sk_memory_stream.html#ad2abf3d7eff355a470d221c94168cfb1">skipToAlign4</a>();
<a name="l00180"></a>00180     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_sk_memory_stream.html#a2974393ffc98184017890b429f2a0f78">rewind</a>();
<a name="l00181"></a>00181     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="class_sk_memory_stream.html#a03b7d5b6a3463a05d77356c46ac72c5d">read</a>(<span class="keywordtype">void</span>* buffer, <span class="keywordtype">size_t</span> size);
<a name="l00182"></a>00182     <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="class_sk_memory_stream.html#a7f26a7addd438c4875d031801e31880d">getMemoryBase</a>();
<a name="l00183"></a>00183     <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="class_sk_memory_stream.html#a0e79c19d538544fe57a607d9af9be4d3">getAtPos</a>();
<a name="l00184"></a>00184     <span class="keywordtype">size_t</span> <a class="code" href="class_sk_memory_stream.html#a4cfb81db97cff1a4eefb5efdc8210a0a">seek</a>(<span class="keywordtype">size_t</span> offset);
<a name="l00185"></a><a class="code" href="class_sk_memory_stream.html#a3058d8055acc51bad730e293ba45af29">00185</a>     <span class="keywordtype">size_t</span> <a class="code" href="class_sk_memory_stream.html#a3058d8055acc51bad730e293ba45af29">peek</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fOffset; }
<a name="l00186"></a>00186     
<a name="l00187"></a>00187 <span class="keyword">private</span>:
<a name="l00188"></a>00188     <span class="keyword">const</span> <span class="keywordtype">void</span>* fSrc;
<a name="l00189"></a>00189     <span class="keywordtype">size_t</span> fSize, fOffset;
<a name="l00190"></a>00190     <a class="code" href="_sk_types_8h.html#a6c7dec5c0a40866075ef185dd7a3eb42">SkBool8</a> fWeOwnTheData;
<a name="l00191"></a>00191 };
<a name="l00192"></a>00192 
<a name="l00198"></a><a class="code" href="class_sk_buffer_stream.html">00198</a> <span class="keyword">class </span><a class="code" href="class_sk_buffer_stream.html">SkBufferStream</a> : <span class="keyword">public</span> <a class="code" href="class_sk_stream.html">SkStream</a> {
<a name="l00199"></a>00199 <span class="keyword">public</span>:
<a name="l00206"></a>00206     <a class="code" href="class_sk_buffer_stream.html#a5d9aeccad702956e462c9fcce283738f">SkBufferStream</a>(<a class="code" href="class_sk_stream.html">SkStream</a>* proxy, <span class="keywordtype">size_t</span> bufferSize = 0);
<a name="l00214"></a>00214     <a class="code" href="class_sk_buffer_stream.html#a5d9aeccad702956e462c9fcce283738f">SkBufferStream</a>(<a class="code" href="class_sk_stream.html">SkStream</a>* proxy, <span class="keywordtype">void</span>* buffer, <span class="keywordtype">size_t</span> bufferSize);
<a name="l00215"></a>00215     <span class="keyword">virtual</span> <a class="code" href="class_sk_buffer_stream.html#a67b1cb5e65a8bd52314aef6a44b2cac4">~SkBufferStream</a>();
<a name="l00216"></a>00216 
<a name="l00217"></a>00217     <span class="keyword">virtual</span> <span class="keywordtype">bool</span>        <a class="code" href="class_sk_buffer_stream.html#ae3ea03b9396e64af5ec9ffb461adde41">rewind</a>();
<a name="l00218"></a>00218     <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="class_sk_buffer_stream.html#abd227d0fc7bddd23b6876df294afd7b2">getFileName</a>();
<a name="l00219"></a>00219     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span>      <a class="code" href="class_sk_buffer_stream.html#a27f6c752e16c936f11ac81730135f6f0">read</a>(<span class="keywordtype">void</span>* buffer, <span class="keywordtype">size_t</span> size);
<a name="l00220"></a>00220     <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="class_sk_buffer_stream.html#a935ca20a1c770189a27e2a8e164071e3">getMemoryBase</a>();
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 <span class="keyword">private</span>:
<a name="l00223"></a>00223     <span class="keyword">enum</span> {
<a name="l00224"></a>00224         kDefaultBufferSize  = 128
<a name="l00225"></a>00225     };
<a name="l00226"></a>00226     <span class="comment">// illegal</span>
<a name="l00227"></a>00227     <a class="code" href="class_sk_buffer_stream.html#a5d9aeccad702956e462c9fcce283738f">SkBufferStream</a>(<span class="keyword">const</span> <a class="code" href="class_sk_buffer_stream.html">SkBufferStream</a>&amp;);
<a name="l00228"></a>00228     <a class="code" href="class_sk_buffer_stream.html">SkBufferStream</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="class_sk_buffer_stream.html">SkBufferStream</a>&amp;);
<a name="l00229"></a>00229 
<a name="l00230"></a>00230     <a class="code" href="class_sk_stream.html">SkStream</a>*   fProxy;
<a name="l00231"></a>00231     <span class="keywordtype">char</span>*       fBuffer;
<a name="l00232"></a>00232     <span class="keywordtype">size_t</span>      fOrigBufferSize, fBufferSize, fBufferOffset;
<a name="l00233"></a>00233     <span class="keywordtype">bool</span>        fWeOwnTheBuffer;
<a name="l00234"></a>00234 
<a name="l00235"></a>00235     <span class="keywordtype">void</span>    init(<span class="keywordtype">void</span>*, <span class="keywordtype">size_t</span>);
<a name="l00236"></a>00236 };
<a name="l00237"></a>00237 
<a name="l00239"></a>00239 
<a name="l00240"></a><a class="code" href="class_sk_f_i_l_e_w_stream.html">00240</a> <span class="keyword">class </span><a class="code" href="class_sk_f_i_l_e_w_stream.html">SkFILEWStream</a> : <span class="keyword">public</span> <a class="code" href="class_sk_w_stream.html">SkWStream</a> {
<a name="l00241"></a>00241 <span class="keyword">public</span>:
<a name="l00242"></a>00242             <a class="code" href="class_sk_f_i_l_e_w_stream.html#ace276302750a39c2eb7f16a4b89d5cdf">SkFILEWStream</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> path[]);
<a name="l00243"></a>00243     <span class="keyword">virtual</span> <a class="code" href="class_sk_f_i_l_e_w_stream.html#a6305d1edc9dd99999ec9c7f580f5506a">~SkFILEWStream</a>();
<a name="l00244"></a>00244 
<a name="l00247"></a><a class="code" href="class_sk_f_i_l_e_w_stream.html#a102885ab8e72e6e81f6a5804400871ab">00247</a>     <span class="keywordtype">bool</span> <a class="code" href="class_sk_f_i_l_e_w_stream.html#a102885ab8e72e6e81f6a5804400871ab">isValid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fFILE != NULL; }
<a name="l00248"></a>00248 
<a name="l00249"></a>00249     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_sk_f_i_l_e_w_stream.html#a1ca0fa24f331caca003d91d1cdd0995e">write</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* buffer, <span class="keywordtype">size_t</span> size);
<a name="l00250"></a>00250     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sk_f_i_l_e_w_stream.html#a2cded526d83e426551c3d814d23c0622">flush</a>();
<a name="l00251"></a>00251 <span class="keyword">private</span>:
<a name="l00252"></a>00252     SkFILE* fFILE;
<a name="l00253"></a>00253 };
<a name="l00254"></a>00254 
<a name="l00255"></a><a class="code" href="class_sk_memory_w_stream.html">00255</a> <span class="keyword">class </span><a class="code" href="class_sk_memory_w_stream.html">SkMemoryWStream</a> : <span class="keyword">public</span> <a class="code" href="class_sk_w_stream.html">SkWStream</a> {
<a name="l00256"></a>00256 <span class="keyword">public</span>:
<a name="l00257"></a>00257     <a class="code" href="class_sk_memory_w_stream.html#af6757e6791f06b973f9889c007796493">SkMemoryWStream</a>(<span class="keywordtype">void</span>* buffer, <span class="keywordtype">size_t</span> size);
<a name="l00258"></a>00258     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_sk_memory_w_stream.html#ade5a4707514b45d07ab92bc41c1f168e">write</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* buffer, <span class="keywordtype">size_t</span> size);
<a name="l00259"></a>00259     
<a name="l00260"></a>00260 <span class="keyword">private</span>:
<a name="l00261"></a>00261     <span class="keywordtype">char</span>*   fBuffer;
<a name="l00262"></a>00262     <span class="keywordtype">size_t</span>  fMaxLength;
<a name="l00263"></a>00263     <span class="keywordtype">size_t</span>  fBytesWritten;
<a name="l00264"></a>00264 };
<a name="l00265"></a>00265 
<a name="l00266"></a><a class="code" href="class_sk_dynamic_memory_w_stream.html">00266</a> <span class="keyword">class </span><a class="code" href="class_sk_dynamic_memory_w_stream.html">SkDynamicMemoryWStream</a> : <span class="keyword">public</span> <a class="code" href="class_sk_w_stream.html">SkWStream</a> {
<a name="l00267"></a>00267 <span class="keyword">public</span>:
<a name="l00268"></a>00268     <a class="code" href="class_sk_dynamic_memory_w_stream.html#a579dae30bb8b787af75c4590daeb2bb4">SkDynamicMemoryWStream</a>();
<a name="l00269"></a>00269     <span class="keyword">virtual</span> <a class="code" href="class_sk_dynamic_memory_w_stream.html#a80b81b23e548e28fb489fd8ac99b1f75">~SkDynamicMemoryWStream</a>();
<a name="l00270"></a>00270     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_sk_dynamic_memory_w_stream.html#aabb6d5c67dcff731611565d7bf3cc0bf">write</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* buffer, <span class="keywordtype">size_t</span> size);
<a name="l00271"></a>00271     <span class="comment">// random access write</span>
<a name="l00272"></a>00272     <span class="comment">// modifies stream and returns true if offset + size is less than or equal to getOffset()</span>
<a name="l00273"></a>00273     <span class="keywordtype">bool</span> <a class="code" href="class_sk_dynamic_memory_w_stream.html#aabb6d5c67dcff731611565d7bf3cc0bf">write</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* buffer, <span class="keywordtype">size_t</span> offset, <span class="keywordtype">size_t</span> size);
<a name="l00274"></a>00274     <span class="keywordtype">bool</span> <a class="code" href="class_sk_dynamic_memory_w_stream.html#aeaea79a58d7eea4df8e343a0c105101a">read</a>(<span class="keywordtype">void</span>* buffer, <span class="keywordtype">size_t</span> offset, <span class="keywordtype">size_t</span> size);
<a name="l00275"></a><a class="code" href="class_sk_dynamic_memory_w_stream.html#a02a1688f526911520fc2f0552ffbfb4a">00275</a>     <span class="keywordtype">size_t</span> <a class="code" href="class_sk_dynamic_memory_w_stream.html#a02a1688f526911520fc2f0552ffbfb4a">getOffset</a>() { <span class="keywordflow">return</span> fBytesWritten; }
<a name="l00276"></a>00276 
<a name="l00277"></a>00277     <span class="comment">// copy what has been written to the stream into dst</span>
<a name="l00278"></a>00278     <span class="keywordtype">void</span>    <a class="code" href="class_sk_dynamic_memory_w_stream.html#a6f66d4a8af6d723f63b2aed3188d40fd">copyTo</a>(<span class="keywordtype">void</span>* dst) <span class="keyword">const</span>;
<a name="l00279"></a>00279     <span class="comment">/*  return a cache of the flattened data returned by copyTo().</span>
<a name="l00280"></a>00280 <span class="comment">        This copy is only valid until the next call to write().</span>
<a name="l00281"></a>00281 <span class="comment">        The memory is managed by the stream class.</span>
<a name="l00282"></a>00282 <span class="comment">    */</span>
<a name="l00283"></a>00283     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="class_sk_dynamic_memory_w_stream.html#a59ac9392b7bda8e59999f04ef748f5e8">getStream</a>() <span class="keyword">const</span>;
<a name="l00284"></a>00284 
<a name="l00285"></a>00285     <span class="comment">// same as getStream, but additionally detach the flattened datat</span>
<a name="l00286"></a>00286     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="class_sk_dynamic_memory_w_stream.html#a1d66cc013a6eb3d058edb08c8ac8e5c6">detach</a>();
<a name="l00287"></a>00287     
<a name="l00288"></a>00288     <span class="comment">// reset the stream to its original state</span>
<a name="l00289"></a>00289     <span class="keywordtype">void</span> <a class="code" href="class_sk_dynamic_memory_w_stream.html#a14085a207ad266891ce3adb957ad3aee">reset</a>();
<a name="l00290"></a>00290     <span class="keywordtype">void</span> <a class="code" href="class_sk_dynamic_memory_w_stream.html#aa51c95234eb1a49c3c920410e60e0c93">padToAlign4</a>();
<a name="l00291"></a>00291 <span class="keyword">private</span>:
<a name="l00292"></a>00292     <span class="keyword">struct </span>Block;
<a name="l00293"></a>00293     Block*  fHead;
<a name="l00294"></a>00294     Block*  fTail;
<a name="l00295"></a>00295     <span class="keywordtype">size_t</span>  fBytesWritten;
<a name="l00296"></a>00296     <span class="keyword">mutable</span> <span class="keywordtype">char</span>*   fCopyToCache;
<a name="l00297"></a>00297 };
<a name="l00298"></a>00298 
<a name="l00299"></a>00299 
<a name="l00300"></a><a class="code" href="class_sk_debug_w_stream.html">00300</a> <span class="keyword">class </span><a class="code" href="class_sk_debug_w_stream.html">SkDebugWStream</a> : <span class="keyword">public</span> <a class="code" href="class_sk_w_stream.html">SkWStream</a> {
<a name="l00301"></a>00301 <span class="keyword">public</span>:
<a name="l00302"></a>00302     <span class="comment">// overrides</span>
<a name="l00303"></a>00303     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_sk_debug_w_stream.html#a2083ccfbb35e11c2b6b3ca3413765718">write</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* buffer, <span class="keywordtype">size_t</span> size);
<a name="l00304"></a>00304     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_sk_debug_w_stream.html#aad5d1395d00d9117d27d49c2deb43599">newline</a>();
<a name="l00305"></a>00305 };
<a name="l00306"></a>00306 
<a name="l00307"></a>00307 <span class="comment">// for now</span>
<a name="l00308"></a><a class="code" href="_sk_stream_8h.html#a67e3bf25bea7cdfc6b7950939e3cdbc5">00308</a> <span class="keyword">typedef</span> <a class="code" href="class_sk_f_i_l_e_stream.html">SkFILEStream</a> <a class="code" href="class_sk_f_i_l_e_stream.html">SkURLStream</a>;
<a name="l00309"></a>00309 
<a name="l00310"></a>00310 <span class="preprocessor">#endif</span>
<a name="l00311"></a>00311 <span class="preprocessor"></span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Tue Oct 20 11:03:40 2009 for Skia by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
